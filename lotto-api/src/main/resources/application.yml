spring:
  application:
    name: lotto-guide-api
  
  profiles:
    active: dev
  
  datasource:
    # AWS 등: SPRING_DATASOURCE_URL 또는 DB_HOST/DB_PORT/DB_NAME 환경 변수로 오버라이드
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:lottoguide}}
    username: ${DB_USERNAME:postgres}
    password: ${DB_PASSWORD:postgres}
    driver-class-name: org.postgresql.Driver
  
  jpa:
    hibernate:
      ddl-auto: update  # 개발 환경에서 스키마 자동 업데이트
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
  
  jackson:
    serialization:
      write-dates-as-timestamps: false
    time-zone: Asia/Seoul

server:
  port: 8083
  servlet:
    context-path: /lotto
  error:
    include-message: always
    include-binding-errors: always

management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: when-authorized

logging:
  level:
    io.appback.lottoguide: DEBUG
    org.springframework.web: INFO
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE

# Feature Flags (프로토타입 설정)
app:
  features:
    rate-limit-enabled: false
    llm-cache-enabled: false
    ad-enabled: false
    llm-budget-cap-enabled: false
    mission-cache-enabled: false
    monitoring-enabled: false

# LLM Provider 설정 (프로토타입에서는 SimpleLlmClient 사용)
llm:
  provider: simple
  simple:
    placeholder-message: "LLM 서비스는 준비 중 입니다."

---
spring:
  config:
    activate:
      on-profile: prod

  jpa:
    hibernate:
      ddl-auto: update  # 프로덕션에서도 update로 설정 (docker-compose 환경 변수로 오버라이드 가능)
    show-sql: false

logging:
  level:
    io.appback.lottoguide: INFO
    org.springframework.web: WARN

# Feature Flags (MVP 설정)
app:
  features:
    rate-limit-enabled: true
    llm-cache-enabled: true
    ad-enabled: true
    llm-budget-cap-enabled: true
    mission-cache-enabled: true
    monitoring-enabled: true

# LLM Provider 설정 (MVP에서는 실제 Provider 사용)
llm:
  provider: openai  # 또는 anthropic 등
  openai:
    api-key: ${LLM_OPENAI_API_KEY:}
    model: gpt-4
    max-tokens: 500
    temperature: 0.7
